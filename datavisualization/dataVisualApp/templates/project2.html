{% load static %}
<!-- data_analysis/templates/eda.html -->
<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dengue Cases</title>
  <link rel="stylesheet" type="text/css" href="{% static 'image/base.css' %}">
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.0/css/jquery.dataTables.min.css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.bootstrap5.min.css">
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>'
<style>
  body{
  height: 100vh;
  background-color: #AAD3DF; 
  font-family: "Poppins" , sans-serif;
  margin: 0;
padding: 0;
box-sizing: border-box;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 60px 1fr;
  grid-template-areas: 
  "side header"
  "side main"
  ;
}
</style>
<body>
  <header class="header">

  </header>

  <div class="sidebar">
    <div class="logo-details">
      <i class='bx bxs-dice-3 icon'></i>
      <div class="logo_name">Group 3</div>
      <i class='bx bx-menu' id="btn"></i>
    </div>

    <ul class="nav-list">
      <li>
        <a href="{% url 'project1' %}">
          <i class='bx bx-plus-medical'></i>
          <span class="links_name">Dengue Case</span>
        </a>
        <span class="tooltip">Dengue Case</span>
      </li>

      <li>
        <a href="{% url 'project2' %}">
          <i class='bx bx-wind'></i>
          <span class="links_name">Air Quality</span>
        </a>
        <span class="tooltip">Air Quality</span>
      </li>

      <li>
        <a href="{% url 'project3' %}">
          <i class='bx bx-chat'></i>
          <span class="links_name">Unemployment</span>
        </a>
        <span class="tooltip">Unemployment</span>
      </li>
      <li>
        <a href="{% url 'others' %}">
          <i class='bx bx-upload'></i>
          <span class="links_name">Upload</span>
        </a>
        <span class="tooltip">Upload</span>
      </li>

      <!-- ... your other HTML code ... -->
      <li class="profile">
        <div class="profile-details">
          <i class='bx bxs-user-circle'></i>

          <div class="name">{{ user.email }}</div>


        </div>
        <button type="button" onclick="location.href='{% url 'logout' %}'">
          <i class='bx bx-log-out' id="log_out"></i>Logout
        </button>
      </li>
      <!-- ... your other HTML code ... -->

    </ul>
  </div>

  <main class="mainp2">
    <div class="card2">
        <div id="map-container">
          {{ map_html|safe }}
    
          <div id="legend">
            <h3> AQI Category: </h3>
            <div class="legend-item"><span class="legend-color" style="background-color:
          blue;"></span>Good</div>
            <div class="legend-item"><span class="legend-color" style="background-color:
          yellow;"></span>Moderate</div>
            <div class="legend-item"><span class="legend-color" style="background-color:
          purple;"></span>Unhealthy</div>
            <div class="legend-item"><span class="legend-color" style="background-color:
          red;"></span>Very Unhealthy</div>
            <div class="legend-item"><span class="legend-color" style="background-color:
          pink;"></span>Unhealthy for Sensitive Groups</div>
            <div class="legend-item"><span class="legend-color" style="background-color:
          brown;"></span>Hazardous</div>
          <button id="arrow2" onclick="scrollToMain2()">
            <div class="butt">View Datatable</div>
        </button>

          </div>
          <div id="char">
            <h3>World Air Quality Index by City and Coordinates</h3>
            <h6>Source: Aditya Ramachandran</h6>
      </div>

      <div id="char2">
        <h6>While the overall outlook appears positive, 
          it's crucial to examine regional disparities. 
          Focusing on specific regions may reveal pockets of concern, 
          helping policymakers and environmental advocates target 
          interventions where they are most needed.</h6>
  </div>

    </div>

   
    </div>


  </main>

  <main id="mainp2m2" class="mainp2m2">


    <div class="card2p2">
      
       <div id="data-container"></div>
    </div>
    <button class="button-17" role="button"><a href="{{ dataset_link }}">Download</a></button>


</main>
</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.datatables.net/1.12.0/js/jquery.dataTables.min.js"></script>

<script>

function scrollToMain2() {
        var main2Element = document.getElementById('mainp2m2');
        main2Element.scrollIntoView({ behavior: 'smooth' });
    }
    
  $(document).ready(function () {
      // Display the data in a table
      var tableHtml = '<table id="data-table" border="1">';
      tableHtml += '<thead><tr>';

      // Add column headers
      for (var colName of {{ data_head_json.columns|safe }}) {
          tableHtml += '<th>' + colName + '</th>';
      }

      tableHtml += '</tr></thead>';
      tableHtml += '<tbody>';

      // Add rows and data
      for (var row of {{ data_head_json.data|safe }}) {
          tableHtml += '<tr>';
          for (var cell of row) {
              tableHtml += '<td>' + cell + '</td>';
          }
          tableHtml += '</tr>';
      }

      tableHtml += '</tbody></table>';

      // Append the table to the data-container div
      $('#data-container').html(tableHtml);

      // Initialize DataTables
      $('#data-table').DataTable({
          "aLengthMenu": [[10, 25, 50-1], [10, 25, 50, "All"]],
          "iDisplayLength": 10
      });
  });
</script>